---
import BaseLayout from "../layouts/BaseLayout.astro";
import BlogPost from "../components/BlogPost.astro";

const allPosts = await Astro.glob("../pages/posts/*.md");
const pageTitle = "Mill√°n Castro - Blog";
---

<BaseLayout pageTitle={pageTitle}>
  <ul class="no-bullets">
    {
      allPosts
        .map((post) => ({
          ...post,
          dateObject: new Date(
            post.frontmatter.pubDate.split("/").reverse().join("-")
          ),
        }))
        .sort((a, b) => b.dateObject.getTime() - a.dateObject.getTime())
        .map((post) => (
          <BlogPost
            url={post.url}
            title={post.frontmatter.title}
            date={post.frontmatter.pubDate}
          />
        ))
    }
  </ul>
</BaseLayout>
